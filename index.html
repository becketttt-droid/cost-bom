<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Minimal Cost Vibe | PeSDTT630D-HW</title>
    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        :root {
            --bg: #0a0a0a; /* 更深邃的黑 */
            --card: #141414;
            --text: #e0e0e0;
            --subtext: #757575;
            
            /* --- 全新極簡低飽和配色 (Minimal Low-Sat Palette) --- */
            /* HEMA: 鏽紅色 (警示但不刺眼) */
            --color-hema: #9c6666; 
            /* 加工: 灰綠色 (沉穩的製造感) */
            --color-proc: #7a8b6f;
            /* 精密/電控: 岩石藍 (冷冽科技感) */
            --color-tech: #6b7c8f;
            /* 素材: 暖陶灰 (厚重基礎感) */
            --color-raw:  #8c857b;
            
            --safe-bottom: env(safe-area-inset-bottom);
            --ios-ease: cubic-bezier(0.25, 1, 0.5, 1);
        }

        body {
            background-color: var(--bg); color: var(--text);
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, sans-serif;
            margin: 0; padding: 0;
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh; letter-spacing: 0.5px;
        }

        .container { 
            width: 100%; max-width: 600px; 
            padding: 30px 20px 100px 20px; 
        }

        /* --- Header --- */
        header { 
            text-align: center; margin: 40px 0 50px; 
        }
        .total-title { 
            font-size: 12px; color: var(--subtext); letter-spacing: 3px; 
            text-transform: uppercase; margin-bottom: 12px; font-weight: 600;
        }
        .total-main-num {
            font-size: 68px; font-weight: 200; color: #fff; /* 使用更細的字體增加高級感 */
            letter-spacing: -1px; font-variant-numeric: tabular-nums;
        }
        .total-sub { font-size: 13px; color: var(--subtext); margin-top: 10px; }

        /* --- Structure Bar --- */
        .chart-card {
            background: var(--card); border-radius: 24px; padding: 28px; 
            border: 1px solid #1f1f1f; margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .chart-title { 
            font-size: 13px; font-weight: 600; margin-bottom: 20px; 
            color: var(--subtext); text-transform: uppercase; letter-spacing: 1px;
            display: flex; justify-content: space-between;
        }
        .structure-bar { 
            width: 100%; height: 16px; background: #1a1a1a; border-radius: 8px; 
            display: flex; overflow: hidden;
        }
        .struct-seg { height: 100%; transition: width 1.5s var(--ios-ease); }
        
        .legend-box { display: flex; gap: 20px; font-size: 12px; color: var(--subtext); margin-top: 20px; }
        .legend-item { display: flex; align-items: center; gap: 8px; }
        .legend-dot { width: 10px; height: 10px; border-radius: 50%; }

        /* --- List --- */
        .section-title { 
            font-size: 16px; font-weight: 500; margin: 0 0 20px 0; color: var(--text);
            letter-spacing: 1px;
        }
        
        .category-group { 
            border-radius: 20px; overflow: hidden; background-color: var(--card); 
            border: 1px solid #1f1f1f; margin-bottom: 16px;
            position: relative; transition: transform 0.2s, background-color 0.2s;
        }
        .category-group:active { transform: scale(0.98); background-color: #1a1a1a; }
        
        .weight-bar {
            position: absolute; top: 0; left: 0; bottom: 0;
            width: 0%; opacity: 0.12; z-index: 0; /* 降低透明度以配合低飽和風格 */
            transition: width 1.5s var(--ios-ease);
        }

        .category-header { 
            padding: 20px; display: flex; align-items: center; 
            justify-content: space-between; position: relative; z-index: 1; cursor: pointer; 
        }
        
        .cat-left { display: flex; align-items: center; gap: 16px; }
        .cat-icon-box { 
            width: 44px; height: 44px; border-radius: 14px; 
            display: flex; justify-content: center; align-items: center; 
            background: rgba(255,255,255,0.03);
        }
        /* SVG Icon Styling */
        .cat-icon-svg { width: 22px; height: 22px; fill: currentColor; opacity: 0.9; }

        .cat-info h3 { margin: 0; font-size: 16px; font-weight: 500; color: #fff; }
        .cat-info p { margin: 4px 0 0; font-size: 12px; color: var(--subtext); }
        
        .cat-right { text-align: right; }
        .cat-amount { display: block; font-size: 16px; font-weight: 600; font-family: ui-monospace, SFMono-Regular, Menlo, monospace; color: #fff; }
        .cat-pct { font-size: 12px; color: var(--subtext); margin-top: 4px; }

        .category-content { 
            max-height: 0; overflow: hidden; background: #0d0d0d; 
            transition: max-height 0.4s var(--ios-ease); 
        }
        .category-group.open .category-content { max-height: 1000px; border-top: 1px solid #1f1f1f; }

        .asset-item { 
            padding: 14px 20px; display: flex; justify-content: space-between; 
            align-items: center; border-bottom: 1px solid #1f1f1f; 
        }
        .asset-item:last-child { border-bottom: none; }
        .item-name { color: #ccc; font-size: 14px; }
        .item-spec { color: #555; font-size: 12px; margin-top: 4px; }
        .item-val { font-family: ui-monospace, monospace; font-size: 14px; color: #eee; }

    </style>
</head>
<body>

<div class="container">
    
    <header>
        <div class="total-title">BOM Total Cost</div>
        <div>
            <span style="font-size:24px; vertical-align: top; color:var(--subtext);">NT$</span>
            <span class="total-main-num" id="displayTotal">0</span>
        </div>
        <div class="total-sub">PeSDTT630D-HW (2026.01)</div>
    </header>

    <div class="chart-card">
        <div class="chart-title">
            <span>Cost Breakdown</span>
            <span style="color:var(--text); opacity: 0.8;">Material vs. Processing</span>
        </div>
        <div class="structure-bar">
            <div class="struct-seg" style="width:71%; background:var(--color-raw);"></div>
            <div class="struct-seg" style="width:29%; background:var(--color-proc);"></div>
        </div>
        <div class="legend-box">
            <div class="legend-item"><div class="legend-dot" style="background:var(--color-raw)"></div> Material (物料)</div>
            <div class="legend-item"><div class="legend-dot" style="background:var(--color-proc)"></div> Processing (託工)</div>
        </div>
    </div>

    <div class="section-title" style="text-align: center; opacity: 0.6;">SUPPLIER ANALYSIS</div>
    <div id="listContainer"></div>

</div>

<script>
    const totalCost = 768902;
    
    // --- 極簡 SVG 圖標定義 ---
    const icons = {
        // HEMA: 帶有金錢符號的砝碼，象徵沉重的成本
        weight: '<svg class="cat-icon-svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.95V5h-2.57v.74c-1.71.43-3.1 1.51-3.1 3.26 0 2.1 1.66 3.07 4.51 3.73 2.14.5 2.66 1.21 2.66 2.03 0 1.05-.99 1.73-2.34 1.73-1.84 0-2.65-.85-2.7-2.14H8.1c.08 2.2 1.43 3.32 3.06 3.62V20h2.57v-.8c2.15-.5 3.67-1.88 3.67-3.89-.01-2.37-2-3.26-4.99-3.87z"/></svg>',
        // 加工: 扳手，象徵組裝與人力
        wrench: '<svg class="cat-icon-svg" viewBox="0 0 24 24"><path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"/></svg>',
        // 精密: 準心，象徵高精度與傳感器
        target: '<svg class="cat-icon-svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v2h-2zm0 4h2v2h-2zm0 4h2v2h-2z"/></svg>',
        // 素材: 堆疊的方塊，象徵原材料鑄件
        cubes: '<svg class="cat-icon-svg" viewBox="0 0 24 24"><path d="M21 16.5c0 .38-.21.71-.53.88l-7.9 4.44c-.16.12-.36.18-.57.18-.19 0-.38-.06-.53-.15l-7.9-4.44c-.36-.18-.57-.51-.57-.88v-9c0-.37.21-.71.57-.88l7.9-4.44c.16-.12.36-.18.53-.18.21 0 .41.06.57.18l7.9 4.44c.32.17.53.51.53.88v9zM12 4.15l-6.04 3.4 6.04 3.4 6.04-3.4L12 4.15zM5.53 9.3v6.56l5.47 3.07V12.4L5.53 9.3zm13.94 6.56V9.3l-6.47 3.1v6.56l6.47-3.07z"/></svg>',
        // 線材: 插頭
        plug: '<svg class="cat-icon-svg" viewBox="0 0 24 24"><path d="M16 6V4c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v5h2v9h2v-9h2v9h2v-9h2v9h2v-9h2V8c0-1.1-.9-2-2-2h-4zm-6 0h4V4h-4v2z"/></svg>',
        // 軸承: 圓環
        bearing: '<svg class="cat-icon-svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/></svg>'
    };

    const suppliers = [
        { 
            name: "HEMA (德國)", total: 159168, 
            colorVar: "--color-hema", iconSvg: icons.weight, // 使用鏽紅色 + 砝碼圖標
            items: [{ n: "煞車器 RC260N (A1/A2/C)", q: "3 PCS", c: 159168 }]
        },
        { 
            name: "晟昌 (SOLPOWER)", total: 112631, 
            colorVar: "--color-proc", iconSvg: icons.wrench, // 使用灰綠色 + 扳手圖標
            items: [{ n: "廠內加工/組立/測試", q: "1 式", c: 112631 }]
        },
        { 
            name: "明江 (Renishaw)", total: 61295, 
            colorVar: "--color-tech", iconSvg: icons.target, // 使用岩石藍 + 準心圖標
            items: [{ n: "西門子讀頭 & 介面", q: "4 PCS", c: 50050 }, { n: "絕對式環型尺", q: "2 PCS", c: 11245 }]
        },
        { 
            name: "全勝鋼鐵", total: 59060, 
            colorVar: "--color-raw", iconSvg: icons.cubes, // 使用暖陶灰 + 方塊圖標
            items: [{ n: "S45C/SCM440 素材", q: "1 批", c: 59060 }]
        },
        { 
            name: "航電 (Cables)", total: 49831, 
            colorVar: "--color-tech", iconSvg: icons.plug, // 使用岩石藍 + 插頭圖標
            items: [{ n: "動力線/訊號線/接頭", q: "1 式", c: 49831 }]
        },
        { 
            name: "珂業 (Bearing)", total: 43500, 
            colorVar: "--color-tech", iconSvg: icons.bearing, // 使用岩石藍 + 軸承圖標
            items: [{ n: "高精密軸承 HRTG 200", q: "3 PCS", c: 43500 }]
        },
        { 
            name: "傳裕 (Casting)", total: 36520, 
            colorVar: "--color-raw", iconSvg: icons.cubes, // 使用暖陶灰 + 方塊圖標
            items: [{ n: "旋軸/傾軸框體 FCD50", q: "2 PCS", c: 36520 }]
        }
    ];

    function animateCount(id, end) {
        let start = 0; let duration = 1800; let startTime = null;
        let obj = document.getElementById(id);
        function step(timestamp) {
            if (!startTime) startTime = timestamp;
            let progress = Math.min((timestamp - startTime) / duration, 1);
            let ease = 1 - Math.pow(1 - progress, 4);
            obj.innerHTML = Math.floor(ease * (end - start) + start).toLocaleString();
            if (progress < 1) window.requestAnimationFrame(step);
        }
        window.requestAnimationFrame(step);
    }

    window.onload = function() {
        animateCount('displayTotal', totalCost);

        const list = document.getElementById('listContainer');
        
        suppliers.forEach((sup, index) => {
            const pct = (sup.total / totalCost * 100).toFixed(1);
            // 獲取 CSS 變數的實際顏色值
            const color = getComputedStyle(document.documentElement).getPropertyValue(sup.colorVar).trim();
            
            const div = document.createElement('div');
            div.className = 'category-group';
            div.innerHTML = `
                <div class="weight-bar" style="background:${color}; width:0%; transition-delay:${index*120}ms"></div>
                
                <div class="category-header" onclick="this.parentElement.classList.toggle('open')">
                    <div class="cat-left">
                        <div class="cat-icon-box" style="color:${color}">${sup.iconSvg}</div>
                        <div class="cat-info">
                            <h3>${sup.name}</h3>
                            <p>${sup.items.length} Items</p>
                        </div>
                    </div>
                    <div class="cat-right">
                        <span class="cat-amount">NT$ ${sup.total.toLocaleString()}</span>
                        <span class="cat-pct">${pct}%</span>
                    </div>
                </div>
                
                <div class="category-content">
                    ${sup.items.map(item => `
                        <div class="asset-item">
                            <div>
                                <div class="item-name">${item.n}</div>
                                <div class="item-spec">${item.q}</div>
                            </div>
                            <div class="item-val">NT$ ${item.c.toLocaleString()}</div>
                        </div>
                    `).join('')}
                </div>
            `;
            list.appendChild(div);
        });

        setTimeout(() => {
            document.querySelectorAll('.weight-bar').forEach((bar, i) => {
                let p = (suppliers[i].total / totalCost * 100).toFixed(1);
                bar.style.width = p + '%';
            });
        }, 300);
    };
</script>

</body>
</html>
